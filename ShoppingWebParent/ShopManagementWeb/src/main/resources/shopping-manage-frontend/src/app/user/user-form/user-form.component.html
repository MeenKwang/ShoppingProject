<div class="form-center">
<h3>Create New User</h3>
<form [formGroup]="userForm" (ngSubmit)="submit()"> 
    <div class="mb-3">
        <input placeholder="Email" type="email" formControlName="email" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['email'].errors }" required />
        <div *ngIf="submitted && f['email'].errors" class="invalid-feedback">
          <div *ngIf="f['email'].errors['required']">Email is required</div>
          <div *ngIf="f['email'].errors['email']">Email is invalid</div>
          <div *ngIf="f['email'].errors['uniqueEmail']">Email is already taken</div>
        </div>
    </div>
    <div class="mb-3">
        <input type="text" formControlName="firstName" id="firstName" placeholder="First Name" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['firstName'].errors }" required  />
        <div *ngIf="f['firstName'].errors"
              class="invalid-feedback">

            <div *ngIf="f['firstName'].errors?.['required']">
              First name is required.
            </div>
            <div *ngIf="f['firstName'].errors?.['minlength']">
              First name must be at least 3 characters long.
            </div>
          </div>
    </div>
    <div class="mb-3">
        <input placeholder="Last Name" type="text" formControlName="lastName" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['lastName'].errors }" required />
        <div *ngIf="f['lastName'].errors"
              class="invalid-feedback">

            <div *ngIf="f['lastName'].errors?.['required']">
              Last name is required.
            </div>
            <div *ngIf="f['lastName'].errors?.['minlength']">
              Last name must be at least 3 characters long.
            </div>
          </div>
    </div>
    <div class="mb-3">
        <input placeholder="Password" type="password" formControlName="password"  class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['password'].errors }" required />
        <div *ngIf="submitted && f['password'].errors" class="invalid-feedback">
          <div *ngIf="f['password'].errors['required']">Password is required</div>
          <div *ngIf="f['password'].errors['minlength']">
            Password must be at least 6 characters
          </div>
          <div *ngIf="f['password'].errors['maxlength']">
            Username must not exceed 32 characters
          </div>
          <div *ngIf="f['password'].errors['pattern']">
            Password need at least one special character
          </div>
        </div>
    </div>
    <div class="mb-3">
        <input placeholder="Confirm Password" type="password" formControlName="confirmPassword" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['confirmPassword'].errors }" required />
          <div
          *ngIf="submitted && f['confirmPassword'].errors"
          class="invalid-feedback"
        >
          <div *ngIf="f['confirmPassword'].errors['required']">
            Confirm Password is required
          </div>
          <div *ngIf="f['confirmPassword'].errors['matching']">
            Confirm Password does not match
          </div>
        </div>
    </div>
    <div class="form-check mb-3">
        <label class="form-check-label" for="flexCheckDefault">
            Enabled
        </label>
        <input class="form-check-input" type="checkbox" formControlName="enabled" id="flexCheckDefault" />
    </div>
    <div class="mb-3">
        <ng-select
            [items]="roleList"
            bindLabel="name"
            placeholder="Select Role"
            appendTo="body"
            [multiple]="true"
            formControlName="roles"
            [ngClass]="{ 'is-invalid': submitted && f['roles'].errors }"
            required>
        </ng-select>
        <div
          *ngIf="submitted && f['roles'].errors"
          class="invalid-feedback">
          <div *ngIf="f['roles'].errors['required']">
            Roles is required
          </div>
        </div>
    </div>
    <div class="mb-3">
        <!-- Select File -->
        <input type="file" accept="image/*" (change)="showPreview($event)" class="form-control"
          [ngClass]="{ 'is-invalid': submitted && f['avatar'].errors }" required />

        <div
          *ngIf="submitted && f['avatar'].errors"
          class="invalid-feedback">
          <div *ngIf="f['avatar'].errors['required']">
            Avatar is required
          </div>
        </div>
        <!-- Image Preview -->
        <div class="imagePreview" *ngIf="imageURL && imageURL !== ''">
            <img [src]="imageURL" alt="Image Preview">
        </div>
    </div>
    <button class="btn btn-primary">Submit</button>
</form>
</div>

